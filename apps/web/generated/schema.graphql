### This file was generated by Nexus Schema
### Do not make changes to this file directly


"""Activity log entry for organization events"""
type Activity {
  activity_type: ActivityType!
  actor_id: String
  actor_name: String
  amount: String
  created_at: DateTime!
  description: String
  id: ID!
  issue_number: Int
  organization: Organization
  pr_number: Int
  repository_id: String
  reward_id: String
  title: String!
}

enum ActivityType {
  APP_INSTALLED
  APP_UNINSTALLED
  DEPOSIT
  ISSUE_CLOSED
  ISSUE_CREATED
  MAINTAINER_ADDED
  MAINTAINER_REMOVED
  ORG_REACTIVATED
  ORG_SUSPENDED
  PR_MERGED
  REPO_ADDED
  REPO_REMOVED
  REWARDS_DISABLED
  REWARDS_ENABLED
  REWARD_CLAIMED
  REWARD_CLAIM_FAILED
  REWARD_ISSUED
}

type CheckInstallationData {
  organization: Organization
  repositories: [Repository!]!
  type: String
}

type CheckInstallationResponse {
  data: CheckInstallationData
  error: String
  success: Boolean!
}

type Contributor {
  created_at: DateTime!
  email: String
  github_id: String!
  id: ID!
  rewards: [Reward]
  updated_at: DateTime!
  user: User
}

"""
A date-time string at UTC, such as 2007-12-03T10:15:30Z, compliant with the `date-time` format outlined in section 5.6 of the RFC 3339 profile of the ISO 8601 standard for representation of dates and times using the Gregorian calendar.
"""
scalar DateTime

"""
Global aggregated statistics across all organizations (computed from database)
"""
type GlobalStats {
  totalActiveRepositories: Int!
  totalBalance: Float!
  totalContributors: Int!
  totalOrganizations: Int!
  totalPendingRewards: Int!
  totalRepositories: Int!
  totalRewardsDistributed: Float!
}

"""
The `JSON` scalar type represents JSON values as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar JSON @specifiedBy(url: "http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf")

type Mutation {
  addRepositoryMaintainer(github_id: String!, repositoryId: String!, role: RepositoryRole!, userId: String!): RepositoryMaintainer!
  claimReward(rewardId: String!, signature: String!, walletAddress: String!): Reward
  enableRewardsOnRepository(repositoryId: [String!]!): RepositoryMutationResponse
  enableSyncMaintainers(organizationId: String!): Organization
  linkContributorToUser(github_id: String!, userId: String!): Contributor
  removeRepositoryMaintainer(id: String!): Boolean
}

type Organization {
  app_installed: Boolean!
  app_uninstalled_at: DateTime
  created_at: DateTime!
  github_org_id: String!
  id: ID!
  installation_id: String!
  name: String!
  owner: User!
  owner_github_id: String!
  repositories: [Repository]
  suspended: Boolean!
  sync_maintainers: Boolean!
  updated_at: DateTime!
}

enum OrganizationRole {
  MEMBER
  OWNER
}

"""Aggregated statistics for an organization (computed from database)"""
type OrganizationStats {
  activeRepositories: Int!
  totalBalance: Float!
  totalPendingAmount: Float!
  totalRepositories: Int!
  totalRewardsClaimed: Int!
  totalRewardsDistributed: Float!
  totalRewardsPending: Int!
  uniqueContributors: Int!
}

type OrganizationWithDetails {
  appInstalled: Boolean!
  createdAt: DateTime!
  githubOrgId: String!
  id: String!
  installationId: String!
  name: String!

  """Organization owner"""
  owner: User
  ownerGithubId: String!

  """All repositories for this organization"""
  repositories: [Repository!]!
  suspended: Boolean!
  updatedAt: DateTime!
}

"""Complete dashboard data for organization owner"""
type OwnerDashboardData {
  """List of organizations with basic details (fast)"""
  organizations: [OrganizationWithDetails!]!
}

type Payout {
  claimed_at: DateTime!
  destination_chain: String!
  id: ID!
  platform_fee: String!
  receiver_address: String!
  reward: Reward
  signature_hash: String!
  total_amount: String!
  tx_hash: String!
}

type Query {
  allRepositories(token: String!): [Repository]
  allUsers(token: String!): [User]
  checkInstallation(installationId: String!): CheckInstallationResponse
  contributor(id: String!): Contributor
  contributorByGithubId(github_id: String!): Contributor
  getClaimMessage(rewardId: String!, walletAddress: String!): String!

  """
  Get aggregated statistics across all organizations owned by user (VERY SLOW query)
  """
  getGlobalStats: GlobalStats

  """Get recent activity logs for an organization (FAST query - indexed)"""
  getOrganizationActivity(limit: Int = 10, offset: Int = 0, organizationId: String!): [Activity!]!

  """Get organization details by ID (FAST query)"""
  getOrganizationDetails(organizationId: String!): OrganizationWithDetails

  """
  Get aggregated statistics for an organization (SLOW query - use separately)
  """
  getOrganizationStats(organizationId: String!): OrganizationStats

  """Get all organizations owned by the current user (FAST query)"""
  getOwnerDashboard: OwnerDashboardData

  """
  Get pending (unclaimed but confirmed) rewards for an organization (FAST query)
  """
  getPendingRewards(limit: Int = 10, offset: Int = 0, organizationId: String!): [Reward!]!

  """Get all rewards for a repository (FAST query)"""
  getRepositoryRewards(limit: Int = 50, offset: Int = 0, repositoryId: String!): [Reward!]!

  """
  Get aggregated statistics for a repository (SLOW query - use separately)
  """
  getRepositoryStats(repositoryId: String!): RepositoryStats

  """Get stats for multiple repositories at once (SLOW query)"""
  getRepositoryStatsBatch(repositoryIds: [String!]!): [RepositoryStats!]!
  listOrganizationsForOwner: [Organization]
  me: User
  organization(id: String!): Organization
  organizationByGithubId(githubOrgId: String!): Organization
  organizations: [Organization]
  repositoriesByOrganizationId(organizationId: String!): [Repository]
  repository(id: String!): Repository
  repositoryByGithubRepoId(githubRepoId: String!): Repository
  repositoryMaintainers(repositoryId: String!): [RepositoryMaintainer!]!
  reward(id: String!): Reward
  rewardsByContributor(contributorGithubId: String!): [Reward!]!
  rewardsByRepository(repoGithubId: String!): [Reward!]!
  user(id: String!): User
  userByEmail(email: String!): User
  userByGithubId(github_id: String!): User
}

type Repository {
  created_at: DateTime!
  enabled_rewards: Boolean!
  github_repo_id: String!
  id: ID!
  is_removed: Boolean!
  maintainers: [RepositoryMaintainer!]!
  name: String!
  organization: Organization
  removed_at: DateTime
  rewards: [Reward]
  updated_at: DateTime!
}

type RepositoryMaintainer {
  created_at: DateTime!
  github_id: String!
  id: ID!
  issued_rewards: [Reward]
  repository: Repository!
  role: RepositoryRole!
  user: User
}

type RepositoryMutationResponse {
  error: String
  success: Boolean!
}

enum RepositoryRole {
  ADMIN
  MAINTAIN
}

"""Aggregated statistics for a repository (computed from database)"""
type RepositoryStats {
  maintainerCount: Int!
  pendingAmount: Float!
  totalDistributed: Float!
  totalPending: Int!
  totalRewards: Int!
  uniqueContributors: Int!
}

type Reward {
  claimed: Boolean!
  comment: String!
  confirmed: Boolean!
  contributor: Contributor
  created_at: DateTime!
  id: ID!
  issuer: RepositoryMaintainer!
  payout: Payout
  pr_number: Int!
  repository: Repository
  secret: String!
  token_amount: String!
  updated_at: DateTime!
}

type User {
  contributor: [Contributor]
  created_at: DateTime!
  email: String
  github_id: String!
  id: ID!
  maintenances: [RepositoryMaintainer]
  name: String!
  organizations: [Organization]
  updated_at: DateTime!
}